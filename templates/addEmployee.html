<div class="row">
    <div class="col-lg-12 col-md-12 col-sm-12">
        <div class="page-header">
            <h3 class="fts-17"> <i class="glyphicon glyphicon-plus tooltip-button demo-icon icon-edit" title=".icon-edit"></i> Add New Employee</h3>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-12">
        <div class="panel panel-info">
<!--            <div class="panel-heading"> Add New Employee</div>-->
            <div class="panel-wrapper collapse in" aria-expanded="true">
                <div class="panel-body">
                    <form class="form-horizontal">
                        <div class="form-body">
                            <h3 class="box-title">Employee Info</h3>
                            <hr class="m-t-0 m-b-40">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label class="control-label col-md-3 fts-15 fwr justify-left">First Name<span class="danger">*</span></label>
                                        <div class="col-md-9">
                                            <input type="text" ng-model="employee.firstname" class="form-control" placeholder="Enter First Name">
                                            <span class="help-block" id="firstname-help-block"></span></div>
                                    </div>
                                </div>
                                <!--/span-->
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label class="control-label col-md-3 fts-15 fwr justify-left">Last Name</label>
                                        <div class="col-md-9">
                                            <input type="text" ng-model="employee.lastname" class="form-control" placeholder="Enter Last Name">
                                            <span class="help-block"></span> 
                                        </div>
                                    </div>
                                </div>
                                <!--/span-->
                            </div>
                            <!--/row-->
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label class="control-label col-md-3 fts-15 fwr justify-left">Email Id<span class="danger">*</span></label>
                                        <div class="col-md-9">
                                            <input type="text" ng-model="employee.email" ng-blur="validateEmail(employee.email,$event)" class="form-control" placeholder="Enter Email ID">
                                            <span class="help-block" id="email-help-block"></span> 
                                        </div>
                                    </div>
                                </div>
                                <!--/span-->
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label class="control-label col-md-3 fts-15 fwr justify-left">Join Date<span class="danger">*</span></label>
                                        <div class="col-md-9">
                                            <input type="text" ng-model="employee.joining_date" class="form-control" readonly="" id="datepicker" placeholder="dd-mm-yyyy" style="width: 71%;">
                                            <span class="help-block" id="joining_date-help-block"></span>
                                        </div>
                                    </div>
                                </div>
                                <!--/span-->
                            </div>
                            <!--/row-->
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label class="control-label col-md-3 fts-15 fwr justify-left">Phone No.<span class="danger">*</span></label>
                                        <div class="col-md-9">
                                            <input type="text" maxlength="10" ng-model="employee.phone" ng-blur="validateNumber(employee.phone,$event)" class="form-control" placeholder="Enter Phone No">
                                            <span class="help-block" id="phone-help-block"></span> 
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label class="control-label col-md-3 fts-15 fwr justify-left">Designation<span class="danger">*</span></label>
                                        <div class="col-md-9">
                                            <div class="input-group" id="adv-search1">
                                                <input type="text" ng-model="employee.designation.text" readonly="" class="form-control" placeholder="Select Designation">
                                                
                                                <div class="input-group-btn">
                                                    <div class="btn-group" role="group">
                                                        <div class="dropdown dropdown-lg">
                                                            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false"><span class="caret"></span></button>
                                                            <div class="dropdown-menu dropdown-menu-right list_of_items" style="width:363px;max-height: 145px;">
                                                                <input type="text" class="in_search_input" ng-model="designation_query" placeholder="Search Designation" />
                                                                <div class="col-md-12 list_block" ng-class="{selected: employee.designation.id === data.id}" ng-click="selectDesignation(data)" ng-repeat="data in designation | filter: designation_query">{{data.designation}}</div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <span class="help-block" id="designation-help-block"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label class="control-label col-md-3 fts-15 fwr justify-left">Reporting To:</label>
                                        <div class="col-md-9">
					<!--<input type="text" class="form-control" placeholder="Select Reporting To">-->
					<select class="form-control" ng-model="employee.reporting_to" ng-options="reporting.id as reporting.firstname+' '+reporting.lastname  for reporting in reporting_to_employees">
						<option value="">Select Reporting Employee</option>
					</select>
                                            <span class="help-block"></span> 
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <h3 class="box-title">Address</h3>
                            <hr class="m-t-0 m-b-40">
                            <!--/row-->
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label class="control-label col-md-3 fts-15 fwr justify-left">Address 1<span class="danger">*</span></label>
                                        <div class="col-md-9">
                                            <input type="text" ng-model="employee.address1" class="form-control" placeholder="Address Line 1">
                                            <span class="help-block" id="address-help-block"></span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label class="control-label col-md-3 fts-15 fwr justify-left">Address 2</label>
                                        <div class="col-md-9">
                                            <input type="text" ng-model="employee.address2" class="form-control" placeholder="Address Line 2">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <!--State-->
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label class="control-label col-md-3 fts-15 fwr justify-left">State<span class="danger">*</span></label>
                                        <div class="col-md-9">
                                            <div class="input-group" id="adv-search2">
                                                <input type="text" ng-model="employee.state.label" readonly="" autocomplete="Off" class="form-control" placeholder="Select state">
                                                <div class="input-group-btn">
                                                    <div class="btn-group" role="group">
                                                        <div class="dropdown dropdown-lg">
                                                            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false"><span class="caret"></span></button>
                                                            <div class="dropdown-menu dropdown-menu-right list_of_items" style="width:377px;">
                                                                <input type="text" autocomplete="Off" class="in_search_input" ng-model="state_query" placeholder="Search State" />
                                                                <div class="col-md-12 list_block" ng-click="selectState(null)">Select State</div>
                                                                <div class="col-md-12 list_block" ng-click="selectState(state)" ng-class="{selected: employee.state.id === state.state_id}" ng-repeat="state in states |filter : state_query">{{state.state_name}}</div>
                                                            </div>
                                                        </div>
                                                        <!--<button type="button" class="btn btn-primary"><span class="glyphicon glyphicon-search" aria-hidden="true"></span></button>-->
                                                    </div>
                                                </div>
                                            </div>
                                            <span class="help-block" id="state-help-block"></span>
                                        </div>
                                    </div>
                                </div>
                                <!-- /State-->
                                
                                <!--City-->
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label class="control-label col-md-3 fts-15 fwr justify-left">City<span class="danger">*</span></label>
                                        <div class="col-md-9">
                                            <div class="input-group" id="adv-search3">
                                                <input type="text" class="form-control" readonly="" ng-model="employee.city.label" placeholder="Select city">
                                                <div class="input-group-btn">
                                                    <div class="btn-group" role="group">
                                                        <div class="dropdown dropdown-lg">
                                                            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false"><span class="caret"></span></button>
                                                            <div class="dropdown-menu dropdown-menu-right list_of_items" style="width:377px;">
                                                                <input type="text" autocomplete="Off" class="in_search_input" ng-model="city_query" placeholder="Search City" />
                                                                <div class="col-md-12 list_block" ng-click="selectCity(null)">Select City</div>
                                                                <div class="col-md-12 list_block" ng-click="selectCity(city)" ng-class="{selected: employee.city.id === city.city_id}" ng-repeat="city in cities | filter: city_query">{{city.city_name}}</div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <span class="help-block" id="city-help-block"></span>
                                        </div>
                                    </div>
                                </div>
                                <!--/City-->
                            </div>
                            
                            <h3 class="box-title">Create New Login</h3>
                            <hr class="m-t-0 m-b-40"/>
                            
                            <div class="row">
                                <div class="col-md-6"> 
                                    <div class="form-group">
                                        <label class="control-label col-md-3 fts-15 fwr justify-left">Create login </label>
                                        <div class="col-md-9">
                                            <div class="checkbox">
                                                <input type="checkbox" ng-checked="employee.isCreateLogin" ng-click="removeAttachCreateLogin($event)"/>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6"> 
                                    <div class="form-group">
                                        <label class="control-label col-md-3 fts-15 fwr justify-left">Send SMS</label>
                                        <div class="col-md-9">
                                            <div class="checkbox">
                                                <input type="checkbox" id="sendsms_chk"/>
                                            </div>
                                        </div>
                                    </div>
                                </div> 
                            </div>
                            <div class="row" id="user-login-block" ng-if="employee.isCreateLogin">
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label class="control-label col-md-1 fts-15 fwr justify-left">Username</label>
                                        
                                        <div class="col-md-3">
                                            <input type="text" class="form-control" ng-model="employee.username" ng-keyup="">
                                            <span class="username-help-block" id="loginusername"></span>
                                        </div>
                                        <button class="col-md-2 btn btn-info" ng-click="getUsernameAvailibility(employee.username)">Check Availibility</button>
                                        <label class="control-label col-md-1 fts-15 fwr justify-left">Password</label>
                                        <div class="col-md-3">
                                            <input type="text" disabled="" class="form-control" ng-model="employee.password" id="loginpassword"> 
                                        </div>
                                        <div class="col-md-1"><i class="glyphicon glyphicon-refresh refresh-icon" ng-click="generatePassword()" style="top:10px;"></i></div>
                                    </div>
                                    
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-actions">
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="row">
                                        <div class="col-md-6 col-md-9">
                                            <button type="submit" ng-click="saveEmployee(employee)" class="btn btn-success">Submit</button>
                                            <button type="button" ng-click="resetEmployee()" class="btn btn-default">Cancel</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6"> </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
	
    (function ($){
        
        var date = new Date();
        var element = $('#datepicker');
        
        var current = {
            year : date.getFullYear(),
            month : (date.getMonth() < 9 ? '0'+ date.getMonth() : date.getMonth() + 1),
            date : date.getDate()
        };
        
		var default_min_date = '01';
        var max_year = date.getFullYear();
        var start_year = 2012;
		
        var picker = new Pikaday({
            field: document.getElementById('datepicker'),
            format: 'DD-MM-YYYY',
            firstDay: 1,
            minDate: new Date(start_year,'01','01'),
            maxDate: new Date(max_year, current.month , current.date),
            yearRange: [start_year,max_year],
            showWeekNumber : true,
            onSelect: function (){

            }
        });
    }) (jQuery);
</script>