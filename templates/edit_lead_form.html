<div class="row">
    <div class="col-lg-12 col-md-12 col-sm-12">
        <div class="page-header">
            <h3 class="fts-17"> <i class="glyphicon glyphicon-user tooltip-button demo-icon icon-edit" title=".icon-edit"></i>Edit Lead</h3>
        </div>
    </div>
</div>

<!--Mandatory Fields/ Minimum informartion List-->
<ul class="list-group">
	<li class="list-group-item-info" style="padding: 8px;">Please fill the following minimum information to add a new lead</li>
	<li style="padding: 5px; margin-left: 5px; color: green;">Client Mobile Number</li>
	<li style="padding: 5px; margin-left: 5px; color: green;">Select At-least 1 Project</li>
	<li style="padding: 5px; margin-left: 5px; color: green;">Lead Enquiry Status</li>
</ul>
<!-- End: Mandatory Fields -->

<div class="panel panel-primary" ng-class="mark-client-error">
    <div class="panel-heading">
        <div class="panel-title"> <a href="" data-toggle="collapse" data-target="#panel1">Client Basic Information</a></div>
    </div>
    
    <div class="panel-body panel-collapse collapse in" id="panel1">
        
        <div class="container-fluid">
            
            <div class="row">
	 <div class="col-md-4 well">
                    <div class="form-group">
                        <p>Mobile:</p>
                        <input type="text" class="form-control" ng-model="client_basic.customerMobile" ng-class="{'parsley_error': mobile_number_error}" ng-keyup="clientMobileNumberValidation(client_basic.customerMobile)" ng-blur="clientMobileNumberValidation(client_basic.customerMobile);"   ng placeholder="Mobile Number" />
                        <span class="help-block danger" ng-bind="mobile_number_error"></span>
                    </div>
                </div>	
		
                <div class="col-md-4">
                    <div class="form-group">
                        <p>Email:</p>
                        <input type="text" ng-model="client_basic.customerEmail"  class="form-control" placeholder="Email" ng-class="{'parsley_error' : email_error}" ng-blur="clientEmailValidation(client_basic.customerEmail) " />
                        <span class="help-block danger" ng-bind="email_error"></span>
                    </div>
                </div>
                <div class="col-xs-4">
                    <div class="form-group">
                        <p>Gender:</p>
                        <select class="form-control" ng-blur="" ng-model="client_basic.customer_gender" ng-options="item.value as item.label for item in gender ">{{item.label}}
				   <option value="">Select Gender</option>		
				</select>
                    </div>
                </div>
            </div>
                                
            <div class="row">
					<div class="col-md-4">
					   <div class="form-group">
		   <p>Name:</p>
		   <input type="text" ng-model="client_basic.customerName" ng-blur="clientNameValidation(client_basic.customerName)" ng-class="{'parsley_error' : name_error}"  class="form-control" placeholder="Name" />
		   <span class="help-block danger" ng-bind="name_error">{{name_error}}</span>
					   </div>
				   </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <p>Alternate Mobile:</p>
                        <input type="text" class="form-control" ng-model="client_basic.customer_alternate_mobile" placeholder="Alternate Mobile Number" />
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group phone-number">
                        <p>Land Line Number</p>
                        <div class="col-xs-3"><input type="tel" name="phone" ng-model="landline.std" placeholder="STD" class="form-control" size="5" maxlength="5" title=""></div>
                        <div class="col-xs-6"><input type="tel" name="phone" ng-model="landline.number" placeholder="Number" class="form-control" size="7" maxlength="7" title=""></div>
                        <div class="col-xs-4"><input type="tel" name="phone" ng-model="landline.ext" placeholder="Ext" class="form-control" size="4" maxlength="4" title=""></div>
                    </div>
                </div>
            </div>
            
            
            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <p>Country:</p>
                        <input type="text" name="country" class="form-control" value="" ng-model="client_basic.customerCountry" readonly="readonly" />
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <p>State:</p>
                        <select class="form-control" ng-model="client_basic.state_id" ng-class="validation_error.state_error" ng-change="getStateCities()"  ng-options="item.state_id as item.state_name for item in stateList ">
                            <option value=""> Select State</option></select>
                        <span class="help-block danger" ng-bind="state_error"></span>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group phone-number">
                        <p>City</p>
                        <select class="form-control" ng-model="client_basic.city_id" ng-class="validation_error.city_error" ng-change="setCityName()" ng-options="item.city_id as item.city_name for item in cityList ">
                            <option value=""> Select City</option></select>
                        <span class="hrlp-block danger" ng-bind="city_error"></span>
                    </div>
                </div>
            </div>
            
            
            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <p>Profession:</p>
                        <input type="text" class="form-control" placeholder="Profession"  ng-model="client_basic.customerProfession" ng-class="validation_error.profession_error"/>
                        <span class="help-block danger" ng-bind="profession_error"></span>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <p>Date of Birth:</p>
                        <input type="text" readonly="" id="datepicker" ng-model="client_basic.customerDOB" class="form-control" placeholder="DOB" />
                    </div>
                </div>
                
            </div>
            
            <div class="row">
                <div class="col-md-4">
                    <div class="form-group phone-number">
                        <p>Address</p>
                        <textarea class="form-control" ng-model="client_basic.customerAddress" rows="3" placeholder="Enter Address" ng-blur="clientAddressValidation(client.address);" ng-class="validation_error.address_error"></textarea>
                    </div>
                    <span class="help-block danger" ng-bind="address_error"></span>
                </div>
                <div class="col-md-4">
                    <p>Remarks</p>
                    <textarea class="form-control" rows="3" ng-model="client_basic.customerRemark" placeholder="Enter remarks if any"></textarea>
                </div>
            </div>
        </div>
        
    </div>
    
</div>

<div class="panel panel-primary">
    <div class="panel-heading">
        <div class="panel-title">
            <a href="" data-toggle="collapse" data-target="#panel2">Lead Source</a>
        </div>
    </div>
    <div class="panel-body panel-collapse collapse" id="panel2">
            
        <div class="container-fluid">
            
            <div class="col-md-4">
                <div class="form-group">
                    <p>Select Primary Source</p>
                    <select class="form-control" ng-change="getSecondaryLeadSourceList(client_basic.leadPrimarySource)" ng-class="validation_error.primary_lead_source_error" ng-model="client_basic.leadPrimarySource" ng-options="item.id as item.title for item in primary_lead_source">
                        <option value="">Select Primary Source</option></select>
                        <span class="help-block danger" ng-bind="primary_lead_source_error"></span>
                </div>
                
            </div>
            <div class="col-md-4">
                <div class="form-group">
                    <p>Select Secondary Source {{client_basic.leadSecondarySource}}</p>
                    <select class="form-control"  ng-model="client_basic.leadSecondarySource" ng-class="validation_error.secondary_lead_source_error" ng-options="item for item in secondary_lead_source.child">
                        <option value="">Select Secondary Source</option>
                    </select>
                    <span class="help-block danger" ng-bind="secondary_lead_source_error"></span>
                </div>
            </div>
        </div>
        
    </div>
</div>



<!--Table: Enquired Projects-->

<div class="panel panel-primary" ng-controller="enquiryProjects">
   <div class="panel-heading">
	<div class="panel-title"><a href="" data-toggle="collapse" data-target="#panel6"> Enquired Projects</a></div>
   </div>
   <div class="panel-body panel-collapse collapse" id="panel6">
	<table class="table table-bordered">
	   <thead>
	   <th>#</th>
	   <th>Project Name</th>
	   <th>Project City</th>
	   <th>Project URL</th>
	   <th>Action</th>
	   </thead>
	   <tbody>
		<tr ng-repeat="project in enquiry_projects">
		   <td ng-bind="$index+1"></td>
		   <td>{{project.project_name}}</td>
		   <td>{{project.project_city}}</td>
		   <td><a ng-href="{{project.project_url}}">{{project.project_url}}</a></td>
		   <td><button type="button" class="btn btn-xs btn-danger" ng-click="remove_project(enquiry_id, project.project_id)">Remove</button></td>
		</tr>
	   </tbody>
	</table>
   </div>
</div>

<!--End- Table: Enquired Projects-->

<!--Client Preference for projects--> 

<div class="panel panel-primary">
    
    <div class="panel-heading">
        <div class="panel-title"> <a href="" data-toggle="collapse" data-target="#panel3">Client Preference</a></div>
        </div>
    <div class="panel-body panel-collapse collapse" id="panel3">
        <div class="row">
            
            <div class="col-md-3">
				<ul class="list-group">
					<li class="list-group-item active">BHK <span class="pull-right" style="cursor:pointer;"><i ng-click="filters.bhk = ''; bhk_filter = !bhk_filter;" class="fa fa-undo" aria-hidden="true"></i></span></li>
					<li class="list-group-item" ng-repeat="i in [1,2,3,4,5]">{{i}} BHK 
						<span class="pull-right"><input type="radio" name="bhk" ng-click="setBHK(i)" ng-checked="(i === 1) && true || false "  /></span>
					</li>
				</ul>
			</div>
			<div class="col-md-3">
				<ul class="list-group">
					<li class="list-group-item active">Property Status <span class="pull-right" style="cursor:pointer;"><i ng-click="filters.property_status = ''" class="fa fa-undo" aria-hidden="true"></i></span></li>
					<a href="" class="list-group-item" ng-click="setPropertyStatus('ready to move',$event)">Ready To Move <span class="pull-right" ng-show="filters.property_status == 'ready to move'"><i class="fa fa-check pull-right" style="color: green;" aria-hidden="true"></i></span></a>
					<a href="" class="list-group-item" ng-click="setPropertyStatus('under construction',$event)">Under Construction <span class="pull-right" ng-show="filters.property_status == 'under construction'"><i class="fa fa-check pull-right" style="color: green;" aria-hidden="true"></i></span></a>
					<a href="" class="list-group-item" ng-click="setPropertyStatus('new launch',$event)">New Launch <span class="pull-right" ng-show="filters.property_status == 'new launch'"><i class="fa fa-check pull-right" style="color: green;" aria-hidden="true"></i></span></a>
				</ul>
			</div>
			<div class="col-md-3">
				<div class="list-group-item active">Budget <span class="pull-right" style="cursor:pointer;"><i ng-click="filters.resetBudget();" class="fa fa-undo" aria-hidden="true"></i></span></div>
				<div class="filter-budget-container">
					<div class="col-md-6 list-group min-list" style="padding:0px;">
						<div class="list-group-item"><input type="text" readonly="" ng-model="filters.budget.min_label" class="form-control fs12" placeholder="Min Budget" /></div>
						<div class="btn list-group-item" ng-click="setMinBudget(budget,$event)" ng-model="filters.budget.min" ng-repeat="budget in budget_range">{{budget.label}} {{budget.currency_suffix}}</div>
					</div>
					<div class="col-md-6 list-group max-list" style="padding:0px;">
						<div class="btn list-group-item"><input type="text" readonly="" ng-model="filters.budget.max_label" class="form-control fs12" placeholder="Max Budget" /></div>
						<div class="btn list-group-item" ng-click="setMaxBudget(budget,$event)" ng-model="filters.budget.max" ng-repeat="budget in budget_range">{{budget.label}} {{budget.currency_suffix}}</div>
					</div>
				</div>
				<div class="row pull-right" style="margin-top: 8px;"><div class="col-md-3"><button class="btn btn-info btn-xs" ng-disabled="!filters.budget.min && !filter.budget.max" ng-click="applyFilter()">Filter Budget</button></div></div>
			</div>		
			<div class="col-md-3">
				<ul class="list-group" id="filter_property_type"> 
					<li class="list-group-item active">Property Type <span class="pull-right" style="cursor:pointer;"><i ng-click="filters.resetPropertyFilter($event);" class="fa fa-undo" aria-hidden="true"></i></span></li>
					<li class="list-group-item" ng-repeat="property in property_types">{{property.label}}({{property.type}}) <span class="pull-right"><input ng-click="setPropertyType(property.value,$event)" type="checkbox" name="property_type" /></span></li>
				</ul>
			</div>
			
        </div>
    </div>
</div>

<!--Client Preference for projects--> 


<div class="panel panel-primary">
    <div class="panel-heading">
        <div class="panel-title"><a href="" data-toggle="collapse" data-target="#panel4"> Projects</a></div>
        </div>
    <div class="panel-body panel-collapse collapse" id="panel4">
        <div class="row">
            <div class="col-md-12">
                <div class="col-xs-6">                    
                    <input type="text" readonly="" placeholder="Select City" ng-model="project.city_name" ng-click="showCitiesList()" class="form-control" /> 
                </div>
                <div class="col-xs-2"><button class="btn btn-primary" ng-click="searchProject(project.city_name)">Search Project</button></div>
                <div class="col-xs-3 pull-right"><button class="btn btn-info pull-right" ng-disabled="crm_projects.length == 0" ng-click="showFilters()">Apply Filters</button></div>
                <div class="col-xs-6" ng-hide="hide_cities">
                    <ul class="list-group city_list_dropdown">
                        <li class="list-group-item">
		<input class="form-control col-xs-3" type="text" ng-model="city_query"  placeholder="Enter city name to search" />
		<i class="fa fa-refresh" ng-click="refreshProjectCities();" style="position: relative;top: 5px;"></i>
	    </li>
                        <li class="list-group-item" 
                            ng-mouseover="addHoverClass($event)" 
                            ng-mouseleave="RemoveHoverClass($event)" 
                            ng-class="{selected: list.city_id === project.city_id}" 
                            ng-click="setCityVal(list)" ng-repeat="list in project_cities | filter:city_query">{{list.city_name}}</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="row" style="margin-top:15px;">
            <div class="col-md-12">
                <div class="col-xs-12">
                    <div class="panel panel-success">
                        <div class="panel-heading">Projects Listing <span class="badge">{{crm_projects.length}}</span>
                            
                            <span class="pull-right">
                                <input style="margin-top:-7px;" class="form-control" ng-model="project_query" type="text" placeholder="Search Project"/>
                            </span>
                            <span class="pull-right">
                                <select style="margin-top:-7px;" class="form-control" ng-model="page_record_limit" ng-options="limit for limit in [5,10,15,20]">{{limit}}>
                                    <option value="">Select items per page</option>
                                </select>
                            </span>
                        </div>
                    <div class="panel-body">
                        <table class="table table-bordered">
                            <thead>
                            <th class="col-xs-2">Select</th>
                            <th>Project Name</th>
                            <th>Project Status</th>
                            <th>Project URL</th>
                            </thead>
                            <tbody>
                                <tr ng-repeat="project in crm_projects | startFrom: offset | filter: project_query | limitTo:page_record_limit">
                                    <td>
                                        <input class="pull-left" ng-model="check_all_project" ng-checked="searchFromSelectedProjects(project.project_id)" ng-click="selectProject(project,$event)" type="checkbox"/>
                                    </td>
                                    <td>{{project.project_name}}</td>
                                    <td>{{project.status}}</td>
                                    <td>{{project.project_url}}</td>
                                </tr>
                                <tr ng-if="crm_projects.length <= 0">
                                    <td colspan="4" class="make_center danger">
                                        No Project Found
                                    </td>
                                </tr>

                            <div class="pull-right well">
                                <button id="popover_item" class="btn btn-info">Selected Projects <span class="badge">{{selectedProjects.ids.length}}</span></button>
                            </div>
                            </tbody>
                        </table>
						
                        <div class="pull-right" ng-if="crm_projects.length > 0">
                                <ul uib-pagination total-items="crm_projects.length" ng-model="current_page_number" items-per-page="page_record_limit" boundary-links="true" max-size="4" ng-change="pageChange(current_page_number)"></ul>
                        </div>
                    </div>
                </div>
                </div>
            </div>
        </div>
</div>
</div>

<!--Lead Status History-->

<div class="panel panel-primary" ng-controller="leadHistory">
	<div class="panel-heading">
	<div class="panel-title">
	<a href="" data-toggle="collapse" data-target="#panel7">Lead Status History</a>
	</div>
	</div>
   <div class="panel-body panel-collapse collapse"  id="panel7">
	<div class="container-fluid">
		<div class="row">
			<div class="col-md-3 panel panel-default" style="padding:8px; background-color: lavender; ">
			   <b>Current Status:</b> 
			   <p class="pull-right text-primary" loading data="status_loader" ng-click="getStatusData()" >{{lead_status_data.type}}</p>
			</div>
		</div>
		<div class="row" ng-hide="show_lead_status_details">
			
		   <ul class="list-group" id="detailgroup1" ng-show="lead_status_detail.future_ref">
			<li class="list-group-item"><strong>Callback Date:</strong> {{lead_status_data.callback_date}}</li>
			<li class="list-group-item"><strong>Callback Time:</strong> {{lead_status_data.callback_time}}</li>
			<li class="list-group-item"><strong>Callback Remark:</strong> {{lead_status_data.remark}}</li>
			
		   </ul>
		   <ul class="list-group" id="detailgroup2" ng-show="lead_status_detail.meeting">
			<li class="list-group-item"><strong>Event:</strong> {{lead_status_data.sub_type}}</li>
			<li class="list-group-item"><strong>Meeting Date:</strong> {{lead_status_data.meeting_date}}</li>
			<li class="list-group-item"><strong>Meeting Time:</strong> {{lead_status_data.meeting_time}}</li>
			<li class="list-group-item"><strong>Remark:</strong>{{lead_status_data.remark}}</li>
		   </ul>
		   <ul class="list-group" id="detailgroup3" ng-show="lead_status_detail.site_visit">
			<li class="list-group-item"><strong>Event:</strong> {{lead_status_data.sub_type}}</li>
			<li class="list-group-item"><strong>Site Visit Date:</strong> {{lead_status_data.site_visit_date}}</li>
			<li class="list-group-item"><strong>Site Visit Time:</strong> {{lead_status_data.site_visit_time}}</li>
			<li class="list-group-item"><strong>Site Location:</strong>{{lead_status_data.site_location}}</li>
		   </ul>
		   <ul class="list-group" id="detailgroup4" ng-show="lead_status_detail.technical_issue">
			<li class="list-group-item"><strong>Issue:</strong> {{lead_status_data.sub_type}}</li>
			<li class="list-group-item"><strong>Remark:</strong> {{lead_status_data.remark}}</li>
			
		   </ul>
		   
		</div>
		
	    </div>
	
   </div>
</div>
<!--End -- Lead Status History-->

<div class="panel panel-primary">
    <div class="panel-heading">
	 <div class="panel-title">
	    <a ng-href="" data-toggle="collapse" data-target="#panel5">Lead Status</a>
	 </div>
    </div>
    <div class="panel-body panel-collapse collapse" id="panel5">
        
        <div class="row">
                    <div class="col-md-6">
                            <div class="form-group">
                                <p class="pull-left">Select Lead Status:</p>
                                <select class="form-control" ng-change="populate_sub_status(lead_enquiry.id)" ng-model="lead_enquiry.id" ng-class="validation_error.enquiry_status_error" ng-options="item.id as item.title for item in enquiry_status.disposition_group">
                                    <option value="">Select Status</option>
                                </select>
                                <span class="help-block danger" ng-bind="enquiry_status_error"></span>
                            </div>
                   </div>
			<div class="col-md-6" ng-if="enquiry_sub_status_list_item">
				<div class="form-group">
					<p>Select Lead Sub Status:</p>
					<select class="form-control" ng-model="lead_enquiry.sub_status_id" ng-change="setValueEnquiryForSubStatus(lead_enquiry.sub_status_id)" ng-class="" ng-options="item.id as item.status for item in sub_status[0].childs">
						<option value="">Select Status</option>
					</select>
				</div>
			</div>
			
        </div>
          <div class="row">
                    <div class="col-md-12">
			<div class="col-md-6">
				<div class="form-group">
				<p>Remark:</p>
				<textarea class="form-control" ng-model="followup.status_remark"  placeholder="Enter remarks if any" ></textarea>
				</div>
			</div>
			
			<!--HTML Block for displaying calender for date and time picking-->
			<div class="col-md-6" id="calender" ng-if="showCalender">
				<div class="panel panel-default">
					<div class="panel-heading">
						<div class="panel-title">
							Select Date & Time
							<!-- Split button -->
							<div class="btn-group pull-right" ng-hide="false">
							  <button type="button" class="btn btn-info btn-xs">Time Format</button>
							  <button type="button" class="btn btn-info btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
								<span class="caret"></span>
								<span class="sr-only">Toggle Dropdown</span>
							  </button>
							  <ul class="dropdown-menu">
								  <li><a href="" ng-click="changeTimeFormat(12)">12 Hr</a></li>
								  <li><a href="" ng-click="changeTimeFormat(24)">24 Hr</a></li>
							  </ul>
							</div>
						</div>
					</div>
					<div class="panel-body">
						<div style="max-width:306px;" uib-datepicker ng-model="datepicker.dt" class="well well-sm pull-left" datepicker-options="datepicker.options"></div>
						<div class="timepicker" style="float: right; max-width: 150px;">
							<ul class="list-group time-list" style="padding: 0; margin:0; overflow: auto; max-height:255px; width: 150px;">
								<li class="list-group-item" ng-class="{active : item == timepicker.time}" ng-repeat="item in timepicker.default.list" ng-click="setCallbackTime(item)">
									{{item}}:00 {{(item < 12) && 'AM' || 'PM'}}
								</li>
							</ul>
						</div>
					</div>
					<ul class="list-group">
						<li class="list-group-item alert alert-info">{{datepicker.dt | date : 'fullDate'}} {{followup.callback_time}}</li>
					</ul>
				</div>
			</div>			
                    </div>
          </div>
    </div>
			
</div>

<div class="row" style="padding:15px;">
	<div class="col-md-6" ng-if="formErrors">
		<ul class="list-group"> 
			<li class="list-group-item-warning" style="padding: 8px;">Form Errors</li>
			<li ng-repeat="error in formErrors" style="padding: 5px; margin-left: 5px; color: #F00;">{{error}}</li>
		</ul>
	</div>
    <div class="col-md-6 pull-right">
        <button type="button" class="btn btn-primary pull-right" ng-click="editLead();">Edit Lead</button>
    </div>
</div>

<div class="modal fade" tabindex="-1" role="dialog" id="filter-modal">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">Project Filters</h4>
            </div>
            <div class="modal-body">
                
                <div class="container-fluid">
                    
                    <div class="row">
                    
                        <div class="col-sm-2">
                            <ul class="list-group">
                                <li class="list-group-item active">BHK <span class="pull-right" style="cursor:pointer;"><i ng-click="filters.bhk = ''; bhk_filter = !bhk_filter;" class="fa fa-undo" aria-hidden="true"></i></span></li>
                                <li class="list-group-item">1 BHK <span class="pull-right"><input type="radio" name="bhk" ng-click="setBHK('1')"  /></span></li>
                                <li class="list-group-item">2 BHK <span class="pull-right"><input type="radio" name="bhk" ng-click="setBHK('2')"  /></span></li>
                                <li class="list-group-item">3 BHK <span class="pull-right"><input type="radio" name="bhk" ng-click="setBHK('3')"  /></span></li>
                                <li class="list-group-item">4 BHK <span class="pull-right"><input type="radio" name="bhk" ng-click="setBHK('4')"  /></span></li>
                                <li class="list-group-item">5 BHK <span class="pull-right"><input type="radio" name="bhk" ng-click="setBHK('5')"  /></span></li>
                            </ul>
                            
                        </div>
                    
                    
                        <div class="col-sm-3"> 
                            <ul class="list-group">
                                <li class="list-group-item active">Property Status <span class="pull-right" style="cursor:pointer;"><i ng-click="filters.property_status = ''" class="fa fa-undo" aria-hidden="true"></i></span></li>
                                <a href="" class="list-group-item" ng-click="setPropertyStatus('ready to move',$event)">Ready To Move <span class="pull-right" ng-show="filters.property_status == 'ready to move'"><i class="fa fa-check pull-right" style="color: green;" aria-hidden="true"></i></span></a>
                                <a href="" class="list-group-item" ng-click="setPropertyStatus('under construction',$event)">Under Construction <span class="pull-right" ng-show="filters.property_status == 'under construction'"><i class="fa fa-check pull-right" style="color: green;" aria-hidden="true"></i></span></a>
                                <a href="" class="list-group-item" ng-click="setPropertyStatus('new launch',$event)">New Launch <span class="pull-right" ng-show="filters.property_status == 'new launch'"><i class="fa fa-check pull-right" style="color: green;" aria-hidden="true"></i></span></a>
                            </ul>
                            
                        </div>
                    
                        <div class="col-md-4">
                            <div class="list-group-item active">Budget <span class="pull-right" style="cursor:pointer;"><i ng-click="filters.resetBudget();" class="fa fa-undo" aria-hidden="true"></i></span></div>
                            <div class="filter-budget-container">
                                <div class="col-md-6 list-group min-list" style="padding:0px;">
                                    <div class="list-group-item"><input type="text" readonly="" ng-model="filters.budget.min_label" class="form-control fs12" placeholder="Min Budget" /></div>
                                    <div class="btn list-group-item" ng-click="setMinBudget(budget,$event)" ng-model="filters.budget.min" ng-repeat="budget in budget_range">{{budget.label}} {{budget.currency_suffix}}</div>
                                </div>
                                <div class="col-md-6 list-group max-list" style="padding:0px;">
                                    <div class="btn list-group-item"><input type="text" readonly="" ng-model="filters.budget.max_label" class="form-control fs12" placeholder="Max Budget" /></div>
                                    <div class="btn list-group-item" ng-click="setMaxBudget(budget,$event)" ng-model="filters.budget.max" ng-repeat="budget in budget_range">{{budget.label}} {{budget.currency_suffix}}</div>
                                </div>
                            </div>
                        </div>
                       
                        
                        <div class="col-sm-3">
                            <ul class="list-group" id="filter_property_type"> 
                                <li class="list-group-item active">Property Type <span class="pull-right" style="cursor:pointer;"><i ng-click="filters.resetPropertyFilter($event);" class="fa fa-undo" aria-hidden="true"></i></span></li>
                                <li class="list-group-item" ng-repeat="property in property_types">{{property.label}}({{property.type}}) <span class="pull-right"><input ng-click="setPropertyType(property.value,$event)" type="checkbox" name="property_type" /></span></li>
                            </ul>
                        </div>
                        
                    </div>
               
                </div>
                                
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" ng-click="resetFilters()" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" ng-click="applyFilter()">Save Filters</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div>
<!--Template for selected projects--> 
<div id="selected_projects" style="display:none;">
   <ul class="list-group">
       <li class="list-group-item" ng-repeat="item in selectedProjects.projects"> 
           {{item.project_name}} <span aria-hidden="true" style="cursor:pointer;" class="pull-right" ng-click="removeSelected(item)">&times;</span>
       </li>
</ul>
</div>
<!--Template End-->

<!--Status Actions template-->

<div id='status_actions' style='display:none;'>
    
	<div class="callback_datepicker">
		<div style="display:inline-block; min-height:290px;">
			<pre>Selected date is: <em>{{followup.callback_date | date:'fullDate' }}</em></pre>
			<div uib-datepicker ng-model="followup.callback_date" class="well" datepicker-options = "dateOptions"></div>
		</div>
	</div>
    
    <div class="callback_timepicker">
        <div class="panel panel-default">
            <div class="panel-body">
                    <div uib-timepicker ng-model="followup.callback_time"  hour-step="1" minute-step="1"  meridians="meridians" show-meridian="true"></div>
                    <pre class="alert alert-info">Time is: {{followup.callback_time | date:'shortTime' }}</pre>
            </div>
        </div>
           
    </div>
    
    <div class="status_remark">
        <div class="form-group">
            <div class="input-group">
                <textarea class="form-control" style="width:230px;" ng-model="followup.status_remark"></textarea>
            </div>
        </div>
    </div>
   
</div>

<script type="text/javascript">
    (function ($){
        
        var date = new Date();
        var element = $('#datepicker');
        
        var current = {
            year : date.getFullYear(),
            month : (date.getMonth() < 9 ? '0'+ date.getMonth() : date.getMonth() + 1),
            date : date.getDate()
        };
        
        var default_min_date = '01';
        var max_year = date.getFullYear() +10;
        
	var picker = new Pikaday(
		{
			field: document.getElementById('datepicker'),
			format: 'DD-MM-YYYY',
			firstDay: 1,
			minDate: new Date('1900','01','01'),
			maxDate: new Date(max_year, 12, 31),
			yearRange: [1900,current.year],
			showWeekNumber : true,
			onSelect: function (){

			}
	});
        
        $(document).ready(function (){
            
		$('#popover_item').webuiPopover({
			title : 'Selected Projects',
			animation : 'pop',
			width : '260',
			placement : 'left',
			cache : true, // popover will destroy and recreate every time after close 
			arrow : true,
			closeable : true,
			dismissible : true,
			type : 'html',
			url : '#selected_projects',
			backdrop : true,
			//                    onshow : function ($element){},
			//                    onhide : function ($element){}
		});
                   
		$('#callback_date').webuiPopover({
			title : 'Set callback date',
			animation : 'pop',
			width : 'auto',
			placement : 'auto',
			//                    style :'inverse',
			cache : true, // popover will destroy and recreate every time after close 
			arrow : true,
			closeable : true,
			dismissible : false,
			type : 'html',
			url : '#status_actions .callback_datepicker',
			backdrop : true
		});
                
		$('#callback_time').webuiPopover({
			title : 'Set callback time',
			animation : 'pop',
			width : '260',
			placement : 'left',
			//                    style :'inverse',
			cache : true, // popover will destroy and recreate every time after close 
			arrow : true,
			closeable : true,
			dismissible : false,
			type : 'html',
			url : '#status_actions .callback_timepicker',
			backdrop : true
		});
                
		$('#status_remark').webuiPopover({
			title : 'Set status remark',
			animation : 'pop',
			width : 'auto',
			placement : 'auto',
			//                    style :'inverse',
			cache : true, // popover will destroy and recreate every time after close 
			arrow : true,
			closeable : true,
			dismissible : false,
			type : 'html',
			url : '#status_actions .status_remark',
			backdrop : true
		});
                
        });
        
    }) (jQuery);
</script>